{"is_source_file": true, "format": "Dart", "description": "This file defines the LocalDb class responsible for managing local persistence of notes using an SQLite database via the sqflite package. It includes methods for creating, querying, upserting, marking as deleted, hard deleting, and retrieving dirty notes, encapsulating database interactions related to notes.", "external_files": ["package:path/path.dart", "package:sqflite/sqflite.dart", "../models/note.dart"], "external_methods": ["getDatabasesPath()", "openDatabase()", "Note.fromMap()", "Note.toMap()", "ConflictAlgorithm.replace", "DateTime.now()", "DateTime.toUtc()", "DateTime.toIso8601String()"], "published": ["LocalDb"], "classes": [{"name": "LocalDb", "description": "Singleton class handling local SQLite database operations for notes, including creation, fetch, insert/update, delete, and mark as deleted."}], "methods": [{"name": "_internal", "description": "Private constructor for singleton instance."}, {"name": "instance", "description": "Singleton instance of the LocalDb class."}, {"name": "_open", "description": "Privately opens (and initializes if necessary) the database connection."}, {"name": "getAllNotes", "description": "Fetches all non-deleted notes, optionally filtered by a search query."}, {"name": "upsert", "description": "Inserts or replaces a note in the database."}, {"name": "markDeleted", "description": "Marks a note as deleted without physically removing it from database."}, {"name": "hardDelete", "description": "Physically deletes a note from the database."}, {"name": "getDirtyNotes", "description": "Retrieves all notes marked as dirty (modified locally)."}], "calls": ["getDatabasesPath()", "openDatabase()", "db.execute()", "db.query()", "db.insert()", "db.update()", "db.delete()"], "search-terms": ["local database", "notes persistence", "SQLite", "sqflite", "Dart database", "notes_local.db", "notes table", "mark deleted", "dirty notes", "upsert notes"], "state": 2, "file_id": 20, "knowledge_revision": 44, "git_revision": "", "hash": "91c28917b97c9bff8c954afe58426440", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/lib/services/local_db.dart", "revision_history": [{"44": ""}]}