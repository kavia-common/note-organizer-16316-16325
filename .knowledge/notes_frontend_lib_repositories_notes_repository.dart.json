{"is_source_file": true, "format": "Dart", "description": "This file implements the NotesRepository class which provides methods to manage notes, including creating, editing, deleting, and synchronizing notes between local storage and a remote service. It acts as an abstraction layer for note data handling in a note-taking app.", "external_files": ["../models/note.dart", "../services/local_db.dart", "../services/supabase_service.dart"], "external_methods": ["LocalDb.instance", "SupabaseService.instance", "Note.copyWith", "Note._internal()", "LocalDb.getAllNotes", "LocalDb.upsert", "LocalDb.markDeleted", "LocalDb.hardDelete", "SupabaseService.createNote", "SupabaseService.updateNote", "SupabaseService.deleteNote", "SupabaseService.fetchAllNotes"], "published": ["NotesRepository"], "classes": [{"name": "NotesRepository", "description": "A singleton class providing an interface to manage notes, including CRUD operations and synchronization with remote storage."}], "methods": [{"name": "_tempId", "description": "Generates a temporary local ID for new notes until they are synced with remote storage."}, {"name": "getNotes", "description": "Retrieves all notes, optionally filtered by a query."}, {"name": "addNote", "description": "Creates a new note with the given title and content, assigns a temporary ID, and saves it locally."}, {"name": "editNote", "description": "Updates an existing note's title and content, and marks it as dirty for synchronization."}, {"name": "deleteNote", "description": "Soft deletes a note locally, marking it for deletion during synchronization."}, {"name": "syncNow", "description": "Performs synchronization between local database and remote service, handling uploads of local changes and updates from remote."}], "calls": ["LocalDb.getAllNotes", "LocalDb.upsert", "LocalDb.markDeleted", "LocalDb.hardDelete", "SupabaseService.init", "SupabaseService.createNote", "SupabaseService.updateNote", "SupabaseService.deleteNote", "SupabaseService.fetchAllNotes"], "search-terms": ["NotesRepository", "local temporary ID", "sync", "push local changes", "pull remote changes", "soft delete notes", "Note model", "local_db", "supabase_service"], "state": 2, "file_id": 22, "knowledge_revision": 48, "git_revision": "", "hash": "48807acffc25dc0517a095aeabdcea06", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/lib/repositories/notes_repository.dart", "revision_history": [{"48": ""}]}